<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Panel de Trabajador</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="sidebar" id="sidebar">
    <button class="close-btn" onclick="toggleSidebar()">‚úñ</button>
    <ul>
      <li><a href="index.html">Inicio</a></li>
      <li><a href="paqueteria.html">Paqueter√≠a</a></li>
      <li><a href="parqueaderos.html">Parqueaderos</a></li>
    </ul>
  </div>

  <div class="user-popup" id="userPopup">
    <div class="user-popup-content">
      <p><strong>Trabajador:</strong> Cristian Mora</p>
      <p><strong>Email:</strong> trabajador@correo.com</p>
      <button onclick="cerrarSesion()">Cerrar sesi√≥n</button>
    </div>
  </div>

  <header class="top-bar">
    <button class="menu-btn" onclick="toggleSidebar()">‚ò∞</button>
    <div class="logo-container">
      <img src="logo.png" alt="Logo" class="logo" />
      <p class="nombre-conjunto">Conjunto Azahar</p>
    </div>
    <div class="user-info" onclick="toggleUserPopup()">
      <span>TRABAJADOR</span>
      <div class="user-icon">üë§</div>
    </div>
  </header>

  <div class="welcome">
    <h2>Bienvenido <strong>TRABAJADOR</strong></h2>
    <p>Selecciona el m√≥dulo que deseas gestionar en nuestra plataforma.</p>
  </div>
  <main class="main">
    <div class="legend">
      <span><img src="red-bike.svg" class="icon"/> Asignado</span>
      <span><img src="green-bike.svg" class="icon"/> Libre</span>
    </div>

    <div class="search-bar">
      <input type="text" placeholder="Buscar Lugar" />
    </div>

    <div class="grid">
      <script>
        const gridContainer = document.write(`<div class="grid-container">`);
        const letters = ["A","B","C","D","E","F","G","H"];
        for (let i = 1; i <= 4; i++) {
          letters.forEach(letter => {
            const id = `${letter}0${i}`;
            const libre = ["C01","A02","B03","D03","E02","E03","E04","G03"].includes(id);
            document.write(`
              <div class="slot ${libre ? 'libre' : 'asignado'}" ${libre ? `onclick="mostrarPopup('${id}')"` : ''}>
                <img src="${libre ? 'green-bike.svg' : 'red-bike.svg'}" alt="moto" />
                <p>${id}</p>
              </div>
            `);
          });
        }
        document.write(`</div>`);
      </script>
    </div>

    <!-- Bot√≥n principal -->
    <div class="footer">
      <button class="btn-principal" onclick="window.location.href='seleccion_vehiculo.html'">
        <span class="icono">&#x21A9;</span> Men√∫ Principal
      </button>
    </div>
  </main>

  <!-- Popup -->
  <div class="popup" id="popup">
    <div class="popup-content">
      <h2>¬øQu√© deseas hacer con este espacio?</h2>
      <button onclick="window.location.href='asignacion_moto.html'">Asignar espacio</button>
      <button onclick="cerrarPopup()">Atr√°s</button>
    </div>
  </div>

  <script>
      function mostrarPopup(id) {
      document.getElementById('popup').style.display = 'flex';
    }

    function cerrarPopup() {
      document.getElementById('popup').style.display = 'none';
    }
     document.querySelectorAll('.slot.libre').forEach(button => {
      button.addEventListener('click', () => {
        const slot = button.dataset.slot;
        document.getElementById("popup-slot").textContent = slot;
        document.getElementById("popup").style.display = "flex";
      });
    });

    function cerrarPopup() {
      document.getElementById("popup").style.display = "none";
    }

    function asignarEspacio() {
      window.location.href = "asignar.html";
    }
    function toggleSidebar() {
      document.getElementById("sidebar").classList.toggle("active");
    }

    function toggleUserPopup() {
      document.getElementById("userPopup").classList.toggle("active");
    }

    function cerrarSesion() {
      window.location.href = "index.html";
    }
  </script>
</body>
</html>